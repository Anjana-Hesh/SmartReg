<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="payment_report" pageWidth="595" pageHeight="842"
              columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20"
              uuid="a1b2c3d4-e5f6-7890-1234-567890abcdef">

    <queryString>
        <![CDATA[
        SELECT transaction_id, driver_id, driver_name, license_type, amount, payment_method, status, payment_date
        FROM payments
        WHERE status = 'COMPLETED'
        ORDER BY payment_date DESC
        ]]>
    </queryString>

    <!-- Fields map to DB query -->
    <field name="transaction_id" class="java.lang.String"/>
    <field name="driver_id" class="java.lang.String"/>
    <field name="driver_name" class="java.lang.String"/>
    <field name="license_type" class="java.lang.String"/>
    <field name="amount" class="java.math.BigDecimal"/>
    <field name="payment_method" class="java.lang.String"/>
    <field name="status" class="java.lang.String"/>
    <field name="payment_date" class="java.time.LocalDateTime"/>

    <!-- Report Title -->
    <title>
        <band height="80">
            <staticText>
                <reportElement x="0" y="10" width="555" height="30" uuid="f1e2d3c4-b5a6-9807-6543-210987654321"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[License Management System - Payment Report]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="40" width="555" height="15" uuid="f2e3d4c5-b6a7-9808-6544-210987654322"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Completed Payments Report]]></text>
            </staticText>
            <line>
                <reportElement x="0" y="65" width="555" height="1" uuid="a9b8c7d6-e5f4-3210-9876-543210abcdef"/>
            </line>
        </band>
    </title>

    <!-- Column Headers -->
    <columnHeader>
        <band height="25">
            <staticText>
                <reportElement x="0" y="0" width="70" height="25" uuid="b1c2d3e4-f5a6-7890-1234-567890123456"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Transaction ID]]></text>
            </staticText>
            <staticText>
                <reportElement x="70" y="0" width="60" height="25" uuid="c2d3e4f5-a6b7-8901-2345-678901234567"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Driver ID]]></text>
            </staticText>
            <staticText>
                <reportElement x="130" y="0" width="100" height="25" uuid="d3e4f5a6-b7c8-9012-3456-789012345678"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Driver Name]]></text>
            </staticText>
            <staticText>
                <reportElement x="230" y="0" width="60" height="25" uuid="e4f5a6b7-c8d9-0123-4567-890123456789"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[License]]></text>
            </staticText>
            <staticText>
                <reportElement x="290" y="0" width="70" height="25" uuid="f5a6b7c8-d9e0-1234-5678-901234567890"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Amount (LKR)]]></text>
            </staticText>
            <staticText>
                <reportElement x="360" y="0" width="70" height="25" uuid="a6b7c8d9-e0f1-2345-6789-012345678901"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Method]]></text>
            </staticText>
            <staticText>
                <reportElement x="430" y="0" width="125" height="25" uuid="b7c8d9e0-f1a2-3456-7890-123456789012"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Payment Date]]></text>
            </staticText>
            <!-- Header line -->
            <line>
                <reportElement x="0" y="24" width="555" height="1" uuid="c8d9e0f1-a2b3-4567-8901-234567890123"/>
            </line>
        </band>
    </columnHeader>

    <!-- Detail Rows -->
    <detail>
        <band height="20">
            <textField isStretchWithOverflow="true">
                <reportElement x="0" y="0" width="70" height="20" uuid="d9e0f1a2-b3c4-5678-9012-345678901234"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{transaction_id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="70" y="0" width="60" height="20" uuid="e0f1a2b3-c4d5-6789-0123-456789012345"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{driver_id}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true">
                <reportElement x="130" y="0" width="100" height="20" uuid="f1a2b3c4-d5e6-7890-1234-567890123456"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{driver_name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="230" y="0" width="60" height="20" uuid="a2b3c4d5-e6f7-8901-2345-678901234567"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{license_type}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00">
                <reportElement x="290" y="0" width="70" height="20" uuid="b3c4d5e6-f7a8-9012-3456-789012345678"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="360" y="0" width="70" height="20" uuid="c4d5e6f7-a8b9-0123-4567-890123456789"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{payment_method}]]></textFieldExpression>
            </textField>
            <textField pattern="yyyy-MM-dd HH:mm">
                <reportElement x="430" y="0" width="125" height="20" uuid="d5e6f7a8-b9c0-1234-5678-901234567890"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{payment_date}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- Summary Footer -->
    <summary>
        <band height="30">
            <staticText>
                <reportElement x="0" y="5" width="200" height="20" uuid="e6f7a8b9-c0d1-2345-6789-012345678901"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Total Completed Payments:]]></text>
            </staticText>
            <textField>
                <reportElement x="200" y="5" width="50" height="20" uuid="f7a8b9c0-d1e2-3456-7890-123456789012"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="0" y="2" width="555" height="1" uuid="a8b9c0d1-e2f3-4567-8901-234567890123"/>
            </line>
        </band>
    </summary>

</jasperReport>